name: CD Pipeline - Merge Branches

on:
  push:
    branches:
      - develop  # Trigger the pipeline on develop branch push

jobs:
  merge:
    runs-on: ubuntu-latest

    steps:
      # Step 1: Check out the repository
      - name: Checkout code
        uses: actions/checkout@v3
        with:
          fetch-depth: 0  # Ensure full commit history for merging

      # Step 2: Configure Git
      - name: Configure Git
        run: |
          git config --global user.name "hng12-devbot"
          git config --global user.email "hng12-devbot@users.noreply.github.com"

      # Step 3: Merge develop into main
      - name: Merge develop into main
        run: |
          git checkout main
          git merge develop --no-ff -m "Auto-merged develop into main"
          git push origin main
